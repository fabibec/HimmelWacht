cmake_minimum_required(VERSION 3.10)
project(GStreamerOpenCVTest)

set(OPENCV_DIR "${CMAKE_SOURCE_DIR}/dependencies/opencv/build/install")

# Set OpenCV paths manually
set(OpenCV_INCLUDE_DIR "${OPENCV_DIR}/include")
set(OpenCV_LIB_DIR "${OPENCV_DIR}/x64/vc16/lib")

# List the required OpenCV libraries (.lib files, NOT .dll)
set(OpenCV_LIBS
    opencv_core4120.lib
    opencv_highgui4120.lib
    opencv_videoio4120.lib
    opencv_imgproc4120.lib
    opencv_imgcodecs4120.lib
)

# Add your test source file
add_executable(test_gstreamer_pipeline inference.cpp)

# Include OpenCV headers
target_include_directories(test_gstreamer_pipeline PRIVATE ${OpenCV_INCLUDE_DIR})

# Link OpenCV libraries
target_link_directories(test_gstreamer_pipeline PRIVATE ${OpenCV_LIB_DIR})
target_link_libraries(test_gstreamer_pipeline PRIVATE ${OpenCV_LIBS})